var status = -1;
var sel = -1;

var items = [
    4039000, 4039001, 4039002, 4039003, 4039004, 4039005, 4039006, 4039007, 4039008, 4039009,
    4039010, 4039011, 4039012, 4039013, 4039014, 4039015, 4039016, 4039017, 4039018, 4039019,
    4039020, 4039021, 4039022, 4039023, 4039024, 4039025, 4039026, 4039027, 4039028, 4039029,
    4039030, 4039031, 4039032, 4039033, 4039034, 4039035, 4039036, 4039037, 4039038, 4039039,
    4039040, 4039041, 4039042, 4039043, 4039044, 4039045, 4039046, 4039047, 4039048, 4039049,
    4039050, 4039051, 4039052, 4039053, 4039054, 4039055, 4039056, 4039057, 4039058, 4039059,
    4039060, 4039061, 4039062, 4039063, 4039064, 4039065, 4039066, 4039068, 4039069,
    4039070, 4039072, 4039073, 4039074, 4039075, 4039076, 4039077, 4039078, 4039079,
    4039080, 4039081, 4039082, 4039083, 4039084, 4039085, 4039086, 4039087, 4039088, 4039089,
    4039090, 4039091, 4039092, 4039093, 4039094, 4039095, 4039096,
    
    4039500, 4039501, 4039502, 4039503, 4039504, 4039505, 4039506, 4039507, 4039508, 4039509,
    4039510, 4039511, 4039512, 4039513, 4039514, 4039515, 4039516, 4039517, 4039518,
    4039519, 4039520, 4039521, 4039522, 4039523, 4039524, 4039525, 4039526, 4039527, 4039528,
    4039529, 4039530, 4039531, 4039532
]

function start() {
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == 1) {
        status++;
    } else if (mode == 0) {
        status--;
    } else {
        cm.dispose();
        return;
    }

    switch(status) {
        case 0:
            var msg = "若您有以下命運卡，我可以跟您交換相對應的物品";
            for(var i = 0; i < items.length; i++) {
                msg += "\r\n#L" + i + "#交換#b#i" + items[i] + ":##t" + items[i] + "##k";
            }
            cm.sendNext(msg);
            break;
        case 1:
            cm.dispose();
            cm.openNpcDivination(cm.getNpc(),items[selection]);
            break;
        default:
            cm.dispose();
            return;
    }
}