var status = -1;
var useItem = 4001320;
var qty = 1;

var itemList = new Array(1302071,1312034,1322056,1332059,1382042,1402041,1412029,1422033,1432042,1442053,
    1452048,1462043,1472058,1482025,1492026,1302071,1312034,1322056,1332059,1382042,
    1402041,1412029,1422033,1432042,1442053,1452048,1462043,1472058,1482025,1492026, //泳圈(有重複)
    2040025,2040029,2040048,2040053,2040206,2040213,2040218,2040223,2040301,2040317,
    2040321,2040338,2040413,2040418,2040501,2040513,2040516,2040532,2040613,2040625,
    2040701,2040745,2040750,2040755,2040804,2040817,2040914,2040919,2041013,2041016,
    2041019,2041022,2041202,2041207,2041301,2041304,2041307,2041310, //60%飾品防具卷
    2043001,2043101,2043201,2043301,2044001,2044101,2044201,2044301,2044401,2044501,
    2044601,2044701,2044801,2044901,2043701,2043801,2043009, //60%武器卷
    2040024,2040027,2040046,2040051,2040207,2040211,2040216,2040221,2040300,2040316,
    2040319,2040336,2040414,2040417,2040500,2040512,2040515,2040530,2040614,2040700,
    2040743,2040748,2040753,2040803,2040818,2040913,2041012,2041015,2041018,2041021,
    2041100,2041103,2041106,2041109,2041203,2041208,2041300,2041303,2041306,2041309, //100%飾品防具卷
    3010034,3010035,3010065); //遮陽椅

function start() {
    action(1, 0, 0);
}

function action(mode, type, selection) {
    
    if (mode == 1) {
        status++;
    } else if (mode == 0) {
        cm.dispose();
        return;
    } else {
        cm.dispose();
        return;
    }

    switch(status) {
        case 0:
            var msg = "您確定要用#b#i" + useItem + ":##t" + useItem + "##k 進行隨機抽獎嗎？";
            cm.sendYesNo(msg);
            break;
        case 1:
            if(!cm.haveItem(useItem, qty)) {
                cm.sendOk("什麼!?，你好像沒有足夠的#b#i" + useItem + ":##t" + useItem + "##k");
                cm.dispose();
                return;
            }
            if(!cm.canHold()) {
                cm.sendOk("您的背包空間似乎不足唷!");
                cm.dispose();
                return;
            }

            cm.gainItem(useItem, -qty);
            var rand = Math.floor(Math.random() * itemList.length);
            var randItem = itemList[rand];

            cm.gainItem(randItem, 1);
            cm.sendOk("這是給您的#b#i" + randItem + ":##t" + randItem + "##k，請收好！");
            cm.dispose();
            return;
        default:
            cm.dispose();
            return;
    }
}